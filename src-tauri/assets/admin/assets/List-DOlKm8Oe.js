import{r as n,j as s,B as b,R as I}from"./index-CrRWnIjq.js";import{i as M}from"./index-B1Ox7m8n.js";import{u as N,h as R,a1 as l,A as Y,f as h,_ as x,$ as y,m as w}from"./Page-kYXsiZfv.js";import"./index-BFS5rlf2.js";import"./index-BCFTpXN0.js";import"./MinusOutlined-BsLWaGMW.js";import"./RedoOutlined-B-c2Dsb9.js";import"./index-BTSRI9HO.js";const E=({config:t},v)=>{var c;const[j,i]=n.useState([]),[A,d]=n.useState(!0),D=N(r=>r.page.pageData.variableData);n.useEffect(()=>{u({})},[t.api,((c=t.api)==null?void 0:c.sourceType)=="variable"?D:""]);const u=r=>{R(t.api,r).then(e=>{(e==null?void 0:e.code)===0&&(Array.isArray(e.data)?i(e.data):(console.error("[List]","data数据格式错误，请检查"),i([])))})};n.useImperativeHandle(v,()=>({show(){d(!0)},hide(){d(!1)},update:r=>{u(r)}}));const L=r=>{var p;const e=r[(p=t.props.content)==null?void 0:p.name],a=t.props.content.type;if(!e||!a||a==="text")return e;if(a==="money")return h(e,"currency");if(a==="number")return h(e);if(a==="date1")return x(e,"YYYY-MM-DD");if(a==="date2")return x(e);if(a==="tag")return Array.isArray(e)?e.map((o,m)=>s.jsx(y,{children:o},m)):typeof e=="string"||typeof e=="number"?s.jsx(y,{children:e}):e==null?void 0:e.toString()},f=(r,e={})=>{const a=t.events.find(p=>p.eventName===r);w(a==null?void 0:a.actions,e)},S=M;return A&&s.jsx(l,{style:t.style,bordered:t.props.bordered,size:t.props.size,split:t.props.split,header:s.jsx("div",{children:t.props.header}),footer:s.jsx("div",{children:t.props.footer}),dataSource:j,renderItem:r=>{var e,a,p;return s.jsxs(l.Item,{actions:((e=t.props.bulkActionList)==null?void 0:e.map((o,m)=>s.jsx(b,{type:o.type,danger:o.danger,icon:o.icon?I.createElement(S[o.icon]):null,onClick:()=>f(o.eventName,r),children:o.text},o.eventName)))||[],children:[s.jsx(l.Item.Meta,{avatar:t.props.avatar?s.jsx(Y,{src:r[t.props.avatar]}):null,title:(a=t.props.title)!=null&&a.name?s.jsx("span",{style:{color:t.props.title.color},children:r[t.props.title.name]}):null,description:t.props.desc.name?s.jsx("span",{style:{color:t.props.desc.color},children:r[t.props.desc.name]}):null}),(p=t.props.content)!=null&&p.name?s.jsx("div",{style:{color:t.props.content.color},children:L(r)}):null]})}})},O=n.forwardRef(E);export{O as default};
//# sourceMappingURL=List-DOlKm8Oe.js.map
