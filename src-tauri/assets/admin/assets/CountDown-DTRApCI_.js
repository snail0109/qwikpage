import{r as e,m as S,j as R,R as w}from"./index-Ba8_Z7I5.js";import{i as b}from"./index-D8fqk8iM.js";import{S as j,o as D}from"./Page-zRx-fbuc.js";import"./index-d9iZx7WN.js";import"./index-C2BeiomC.js";import"./MinusOutlined-CM_AhdfL.js";import"./RedoOutlined-ZyqLJpQf.js";import"./index-DzTVI9Lo.js";const T=({config:r,onChange:s,onFinish:o},E)=>{var l,f;const[i,y]=e.useState(0),[N,u]=e.useState(!0);e.useEffect(()=>{var x,c,d,v;if(isNaN((x=r.props)==null?void 0:x.value)){console.error("倒计时组件值必须为时间戳类型"),S.error("倒计时组件值必须为时间戳");return}const p=((d=(c=r.props)==null?void 0:c.value)==null?void 0:d.toString())||"",n=(v=r.props)==null?void 0:v.script;let t=p;if(n)try{t=new Function("value",`return (${n})(value);`)(t)}catch(a){console.error("脚本解析失败",a),S.error(JSON.stringify(a))}y(Number(t==null?void 0:t.toString()))},[r.props.value,(l=r.props)==null?void 0:l.script]),e.useImperativeHandle(E,()=>({show(){u(!0)},hide(){u(!1)}}));const m=b;return N&&R.jsx(j.Countdown,{style:r.style,...D(r.props,["script","format","prefix","suffix"]),value:i,format:((f=r.props)==null?void 0:f.format)||void 0,prefix:r.props.prefix?w.createElement(m[r.props.prefix]):null,suffix:r.props.suffix?w.createElement(m[r.props.suffix]):null,onChange:p=>s==null?void 0:s(p),onFinish:()=>o==null?void 0:o(i)})},q=e.forwardRef(T);export{q as default};
