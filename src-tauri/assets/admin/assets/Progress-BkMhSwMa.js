import{r as e,j as r,S as f}from"./index-Ba8_Z7I5.js";import{u as h,h as x,j as b}from"./Page-zRx-fbuc.js";import"./index-d9iZx7WN.js";import"./index-DzTVI9Lo.js";import"./index-C2BeiomC.js";const j=({config:a},l)=>{var n;const[u,d]=e.useState(0),[c,o]=e.useState(!0),[m,i]=e.useState(!0),g=h(t=>t.page.pageData.variableData);e.useEffect(()=>{p({})},[a.api,((n=a.api)==null?void 0:n.sourceType)=="variable"?g:""]);const p=t=>{o(!0),x(a.api,t).then(s=>{(s==null?void 0:s.code)===0&&(typeof s.data=="number"?d(s.data):console.error("[Progress]数据格式错误，进度条需要0-1的数字。")),o(!1)})};return e.useImperativeHandle(l,()=>({show(){i(!0)},hide(){i(!1)},update:t=>{p(t)}})),m&&r.jsx("div",{style:a.style,children:r.jsx(f,{spinning:c,size:"large",wrapperClassName:"spin-loading",children:r.jsx(b,{...a.props,percent:u})})})},w=e.forwardRef(j);export{w as default};
