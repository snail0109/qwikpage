{"version":3,"file":"Drawer-VvZVbH4x.js","sources":["../../../packages/materials/FeedBack/Drawer/Drawer.tsx"],"sourcesContent":["import React, { forwardRef, memo, useImperativeHandle, useState } from 'react';\nimport { ComponentType } from '@materials/types';\nimport { Drawer, Spin } from 'antd';\nimport MarsRender from '@materials/MarsRender/MarsRender';\nimport * as icons from '@ant-design/icons';\nimport { handleActionFlow } from '@materials/utils/action';\nimport AuthButton from '@materials/Functional/Button/AuthButton';\n\nconst AntDrawer = forwardRef(({ config, elements, onClose, onAfterOpenChange }: ComponentType, ref: any) => {\n  const [visible, setVisible] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  useImperativeHandle(ref, () => {\n    return {\n      // 关闭弹框\n      close: () => {\n        setVisible(() => false);\n      },\n      // 打开弹框\n      open: () => {\n        return new Promise((resolve) => {\n          setVisible(() => {\n            resolve(true);\n            return true;\n          });\n        });\n      },\n      // 显示确认Loading\n      showLoading: () => {\n        setLoading(true);\n      },\n      // 隐藏确认Loading\n      hideLoading: () => {\n        setLoading(false);\n      },\n    };\n  });\n\n  const handleOpenChange = (open: boolean) => {\n    onAfterOpenChange?.(open);\n  };\n\n  const handleClose = () => {\n    setVisible(false);\n    onClose?.(); // 关闭时触发回调\n  };\n\n  const handleOperate = (eventName: string) => {\n    const btnEvent = config.events.find((event) => event.eventName === eventName);\n    handleActionFlow(btnEvent?.actions, {});\n  };\n\n  const bulkActionList = config.props.bulkActionList || [];\n  const iconsList: { [key: string]: any } = icons;\n\n  return (\n    <>\n      <Drawer\n        {...config.props}\n        open={visible}\n        afterOpenChange={(open) => handleOpenChange(open)}\n        onClose={handleClose}\n        footer={config.props.footer ? undefined : null}\n        style={{ ...config.style }}\n        extra={\n          <div style={{ display: 'flex', gap: 10 }}>\n            {bulkActionList.map((item: any, index: number) => {\n              return (\n                <AuthButton\n                  key={item.eventName}\n                  type={item.type}\n                  danger={item.danger}\n                  icon={item.icon ? React.createElement(iconsList[item.icon]) : null}\n                  onClick={() => handleOperate(item.eventName)}\n                  authCode={item.authCode}\n                  authScript={item.authScript}\n                >\n                  {item.text}\n                </AuthButton>\n              );\n            })}\n          </div>\n        }\n      >\n        <Spin spinning={loading}>\n          <MarsRender elements={elements || []} />\n        </Spin>\n      </Drawer>\n    </>\n  );\n});\n\nexport default memo(AntDrawer);\n"],"names":["AntDrawer","forwardRef","config","elements","onClose","onAfterOpenChange","ref","visible","setVisible","useState","loading","setLoading","useImperativeHandle","resolve","handleOpenChange","open","handleClose","handleOperate","eventName","btnEvent","event","handleActionFlow","bulkActionList","iconsList","icons","jsx","Fragment","Drawer","item","index","AuthButton","React","Spin","MarsRender","memo"],"mappings":"6VAQA,MAAMA,EAAYC,EAAAA,WAAW,CAAC,CAAE,OAAAC,EAAQ,SAAAC,EAAU,QAAAC,EAAS,kBAAAC,CAAkB,EAAkBC,IAAa,CAC1G,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EAE5CG,EAAA,oBAAoBN,EAAK,KAChB,CAEL,MAAO,IAAM,CACXE,EAAW,IAAM,EAAK,CACxB,EAEA,KAAM,IACG,IAAI,QAASK,GAAY,CAC9BL,EAAW,KACTK,EAAQ,EAAI,EACL,GACR,CAAA,CACF,EAGH,YAAa,IAAM,CACjBF,EAAW,EAAI,CACjB,EAEA,YAAa,IAAM,CACjBA,EAAW,EAAK,CAAA,CAEpB,EACD,EAEK,MAAAG,EAAoBC,GAAkB,CAC1CV,GAAA,MAAAA,EAAoBU,EACtB,EAEMC,EAAc,IAAM,CACxBR,EAAW,EAAK,EACNJ,GAAA,MAAAA,GACZ,EAEMa,EAAiBC,GAAsB,CACrC,MAAAC,EAAWjB,EAAO,OAAO,KAAMkB,GAAUA,EAAM,YAAcF,CAAS,EAC3DG,EAAAF,GAAA,YAAAA,EAAU,QAAS,EAAE,CACxC,EAEMG,EAAiBpB,EAAO,MAAM,gBAAkB,CAAC,EACjDqB,EAAoCC,EAE1C,OAEIC,MAAAC,EAAAA,SAAA,CAAA,SAAAD,EAAA,IAACE,EAAA,CACE,GAAGzB,EAAO,MACX,KAAMK,EACN,gBAAkBQ,GAASD,EAAiBC,CAAI,EAChD,QAASC,EACT,OAAQd,EAAO,MAAM,OAAS,OAAY,KAC1C,MAAO,CAAE,GAAGA,EAAO,KAAM,EACzB,MACEuB,EAAA,IAAC,MAAI,CAAA,MAAO,CAAE,QAAS,OAAQ,IAAK,EAAA,EACjC,SAAAH,EAAe,IAAI,CAACM,EAAWC,IAE5BJ,EAAA,IAACK,EAAA,CAEC,KAAMF,EAAK,KACX,OAAQA,EAAK,OACb,KAAMA,EAAK,KAAOG,EAAM,cAAcR,EAAUK,EAAK,IAAI,CAAC,EAAI,KAC9D,QAAS,IAAMX,EAAcW,EAAK,SAAS,EAC3C,SAAUA,EAAK,SACf,WAAYA,EAAK,WAEhB,SAAKA,EAAA,IAAA,EARDA,EAAK,SASZ,CAEH,EACH,EAGF,SAAAH,EAAAA,IAACO,EAAK,CAAA,SAAUtB,EACd,SAAAe,EAAA,IAACQ,GAAW,SAAU9B,GAAY,CAAA,CAAI,CAAA,CACxC,CAAA,CAAA,CAAA,EAEJ,CAEJ,CAAC,EAEc+B,EAAAA,EAAAA,KAAKlC,CAAS"}