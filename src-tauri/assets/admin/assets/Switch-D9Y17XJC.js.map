{"version":3,"file":"Switch-D9Y17XJC.js","sources":["../../../packages/materials/FormItems/Switch/Switch.tsx"],"sourcesContent":["import { ComponentType } from '@materials/types';\nimport { isNull } from '@materials/utils/util';\nimport { Form, Switch } from 'antd';\nimport { useEffect, useState, useImperativeHandle, forwardRef } from 'react';\nimport { useFormContext } from '@materials/utils/context';\n\n/**\n *\n * @param config 组件配置属性值\n * @param props 系统属性值：componentid、componentname等\n * @returns 返回组件\n */\nconst MSwitch = ({ type, config, onChange }: ComponentType, ref: any) => {\n  const { initValues } = useFormContext();\n  const [visible, setVisible] = useState(true);\n  const [disabled, setDisabled] = useState<boolean | undefined>();\n  // 初始化默认值\n  useEffect(() => {\n    const name: string = config.props.formItem?.name;\n    const value = config.props.defaultValue;\n    initValues(type, name, value);\n  }, [config.props.defaultValue]);\n\n  // 启用和禁用\n  useEffect(() => {\n    if (typeof config.props.formWrap.disabled === 'boolean') setDisabled(config.props.formWrap.disabled);\n  }, [config.props.formWrap.disabled]);\n\n  useImperativeHandle(ref, () => {\n    return {\n      show() {\n        setVisible(true);\n      },\n      hide() {\n        setVisible(false);\n      },\n      enable() {\n        setDisabled(false);\n      },\n      disable() {\n        setDisabled(true);\n      },\n    };\n  });\n\n  // 监听表单值变化\n  const handleChange = (val: string) => {\n    onChange?.({\n      [config.props.formItem.name]: val,\n    });\n  };\n  return (\n    visible && (\n      <Form.Item {...config.props.formItem} valuePropName=\"checked\">\n        <Switch {...config.props.formWrap} disabled={disabled} style={config.style} onChange={handleChange} />\n      </Form.Item>\n    )\n  );\n};\nexport default forwardRef(MSwitch);\n"],"names":["MSwitch","type","config","onChange","ref","initValues","useFormContext","visible","setVisible","useState","disabled","setDisabled","useEffect","name","_a","value","useImperativeHandle","handleChange","val","Form","Switch","forwardRef"],"mappings":"wOAYA,MAAMA,EAAU,CAAC,CAAE,KAAAC,EAAM,OAAAC,EAAQ,SAAAC,CAAA,EAA2BC,IAAa,CACjE,KAAA,CAAE,WAAAC,CAAW,EAAIC,EAAe,EAChC,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAI,EACrC,CAACC,EAAUC,CAAW,EAAIF,WAA8B,EAE9DG,EAAAA,UAAU,IAAM,OACR,MAAAC,GAAeC,EAAAZ,EAAO,MAAM,WAAb,YAAAY,EAAuB,KACtCC,EAAQb,EAAO,MAAM,aAChBG,EAAAJ,EAAMY,EAAME,CAAK,CAC3B,EAAA,CAACb,EAAO,MAAM,YAAY,CAAC,EAG9BU,EAAAA,UAAU,IAAM,CACV,OAAOV,EAAO,MAAM,SAAS,UAAa,WAAuBS,EAAAT,EAAO,MAAM,SAAS,QAAQ,GAClG,CAACA,EAAO,MAAM,SAAS,QAAQ,CAAC,EAEnCc,EAAA,oBAAoBZ,EAAK,KAChB,CACL,MAAO,CACLI,EAAW,EAAI,CACjB,EACA,MAAO,CACLA,EAAW,EAAK,CAClB,EACA,QAAS,CACPG,EAAY,EAAK,CACnB,EACA,SAAU,CACRA,EAAY,EAAI,CAAA,CAEpB,EACD,EAGK,MAAAM,EAAgBC,GAAgB,CACzBf,GAAA,MAAAA,EAAA,CACT,CAACD,EAAO,MAAM,SAAS,IAAI,EAAGgB,CAAA,EAElC,EAEE,OAAAX,SACGY,EAAK,KAAL,CAAW,GAAGjB,EAAO,MAAM,SAAU,cAAc,UAClD,eAACkB,EAAQ,CAAA,GAAGlB,EAAO,MAAM,SAAU,SAAAQ,EAAoB,MAAOR,EAAO,MAAO,SAAUe,CAAA,CAAc,CACtG,CAAA,CAGN,EACeI,EAAAA,EAAAA,WAAWrB,CAAO"}