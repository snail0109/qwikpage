import{a as I,u as m,j as a,B as h,r as g,c as D,m as S}from"./index-Ba8_Z7I5.js";import{u as p,g as v}from"./index-d9iZx7WN.js";import{u as F,P as N}from"./Page-zRx-fbuc.js";import{u as y,g as B}from"./util-Bnw3rxOH.js";import{R as E}from"./index-DzTVI9Lo.js";import"./index-C2BeiomC.js";function R(){const e=I(),{projectId:o}=m(),s=()=>{e(`/project/${o}/welcome`)};return a.jsx(E,{status:404,title:"页面不存在或未发布",subTitle:"当前页面路径不存在，请检查路由地址是否正确或页面是否发布",extra:a.jsx(h,{type:"primary",onClick:s,children:"返回首页"})})}function L(){const[e,o]=g.useState(),[s,n]=g.useState(!1),{projectId:r}=m(),{initPageData:P,savePageInfo:d,clearPageInfo:j}=F(p(t=>({initPageData:t.page.pageData,savePageInfo:t.savePageInfo,clearPageInfo:t.clearPageInfo}))),f=y(p(t=>t.pageMap)),{pathname:l}=D();return g.useEffect(()=>{if(!r)return;const t=l.split(r)[1].slice(1),c=B(t,f);if(!f[c]||!c){n(!0);return}return v(c).then(i=>{let u={};try{u=JSON.parse(i.pageData||"{}")}catch(x){console.error(x),console.info("【json数据】",i.pageData),S.error("页面数据格式错误，请检查")}j(),d({...i,pageData:u}),o(u),n(!1)}).catch(()=>{n(!0)}),()=>{o({config:P.config,elements:[]})}},[r,l]),a.jsx(a.Fragment,{children:s?a.jsx(R,{}):a.jsx(N,{config:e==null?void 0:e.config,elements:e==null?void 0:e.elements})})}export{L as default};
