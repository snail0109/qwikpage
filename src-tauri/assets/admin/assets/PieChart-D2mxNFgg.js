import{r as a,j as r,S as f}from"./index-C0qVWane.js";import{u as x,h as v,e as S}from"./Page-D5iqHLgS.js";import"./index-DPKgr_Rt.js";import"./index-i6Qw7kf9.js";import"./index-DfNzS1Q2.js";const b=({config:e},d)=>{var n;const[u,i]=a.useState([]),[h,o]=a.useState(!0),[c,p]=a.useState(!0),m=x(t=>t.page.pageData.variableData);a.useEffect(()=>{l({})},[e.api,((n=e.api)==null?void 0:n.sourceType)=="variable"?m:""]);const l=t=>{o(!0),v(e.api,t).then(s=>{(s==null?void 0:s.code)===0&&(Array.isArray(s.data)?i(s.data):(console.error("[PieChart]","data数据格式错误，请检查"),i([]))),o(!1)})};return a.useImperativeHandle(d,()=>({show(){p(!0)},hide(){p(!1)},update:t=>{l(t)}})),c&&r.jsx("div",{style:e.style,children:r.jsx(f,{spinning:h,size:"large",wrapperClassName:"spin-loading",children:r.jsx(S,{...e.props,data:u})})})},P=a.forwardRef(b);export{P as default};
