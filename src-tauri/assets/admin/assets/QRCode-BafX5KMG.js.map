{"version":3,"file":"QRCode-BafX5KMG.js","sources":["../../../packages/materials/Basic/QRCode/QRCode.tsx"],"sourcesContent":["import { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { QRCode } from 'antd';\nimport { ComponentType } from '@materials/types';\nimport { omit } from 'lodash-es';\n\nexport type QRStatus = 'active' | 'expired' | 'loading' | 'scanned';\n\n/*泛型只需要定义组件本身用到的属性*/\nexport interface IConfig {\n  value: string;\n  type?: 'canvas' | 'svg';\n  icon?: string;\n  size?: number;\n  iconSize?: number | { width: number; height: number };\n  color?: string;\n  bgColor?: string;\n  bordered?: boolean;\n  errorLevel?: 'L' | 'M' | 'Q' | 'H';\n  status: QRStatus;\n}\n/**\n *\n * @param props 组件本身属性\n * @param style 组件样式\n * @returns\n */\nconst MQRCode = ({ config }: ComponentType<IConfig>, ref: any) => {\n  const [statusEffect, setStatusEffect] = useState<QRStatus>(config.props.status);\n  const [visible, setVisible] = useState(true);\n  // 对外暴露方法\n  useImperativeHandle(ref, () => {\n    return {\n      show() {\n        setVisible(true);\n      },\n      hide() {\n        setVisible(false);\n      },\n      changeQRCodeStatus({ status }: { status: QRStatus }) {\n        setStatusEffect(status);\n      },\n    };\n  });\n\n  useEffect(() => {\n    setStatusEffect(config.props.status);\n  }, [config.props.status]);\n\n  const props = omit(config.props, ['status']);\n\n  return visible && <QRCode style={config.style} {...props} status={statusEffect}></QRCode>;\n};\nexport default forwardRef(MQRCode);\n"],"names":["MQRCode","config","ref","statusEffect","setStatusEffect","useState","visible","setVisible","useImperativeHandle","status","useEffect","props","omit","QRCode","forwardRef"],"mappings":"iLA0BA,MAAMA,EAAU,CAAC,CAAE,OAAAC,GAAkCC,IAAa,CAChE,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAAmB,SAAAJ,EAAO,MAAM,MAAM,EACxE,CAACK,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAE3CG,EAAA,oBAAoBN,EAAK,KAChB,CACL,MAAO,CACLK,EAAW,EAAI,CACjB,EACA,MAAO,CACLA,EAAW,EAAK,CAClB,EACA,mBAAmB,CAAE,OAAAE,GAAgC,CACnDL,EAAgBK,CAAM,CAAA,CAE1B,EACD,EAEDC,EAAAA,UAAU,IAAM,CACEN,EAAAH,EAAO,MAAM,MAAM,CAClC,EAAA,CAACA,EAAO,MAAM,MAAM,CAAC,EAExB,MAAMU,EAAQC,EAAKX,EAAO,MAAO,CAAC,QAAQ,CAAC,EAEpC,OAAAK,SAAYO,EAAO,CAAA,MAAOZ,EAAO,MAAQ,GAAGU,EAAO,OAAQR,CAAc,CAAA,CAClF,EACeW,EAAAA,EAAAA,WAAWd,CAAO"}