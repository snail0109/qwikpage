{"version":3,"file":"Modal-CFaMTEhx.js","sources":["../../../packages/materials/FeedBack/Modal/Modal.tsx"],"sourcesContent":["import { ComponentType } from '@materials/types';\nimport { Modal, Spin } from 'antd';\nimport { forwardRef, memo, useEffect, useImperativeHandle, useState } from 'react';\nimport MarsRender from '@materials/MarsRender/MarsRender';\n\n/**\n *\n * @param props 组件本身属性\n * @param style 组件样式\n * @returns\n */\nconst AntdModal = forwardRef(({ config, elements, onLoad, onOk, onCancel }: ComponentType, ref: any) => {\n  const [visible, setVisible] = useState(false);\n  const [confirmLoading, setConfirmLoading] = useState(config.props.confirmLoading);\n  const [loading, setLoading] = useState(false);\n  // 对外暴露方法\n  useImperativeHandle(\n    ref,\n    () => {\n      return {\n        // 关闭弹框\n        close: () => {\n          setVisible(() => false);\n        },\n        // 打开弹框\n        open: () => {\n          return new Promise((resolve) => {\n            setVisible(true);\n            setTimeout(() => resolve(true), 0);\n          });\n        },\n        // 显示确认Loading\n        showConfirmLoading: () => {\n          setConfirmLoading(true);\n        },\n        // 隐藏确认Loading\n        hideConfirmLoading: () => {\n          setConfirmLoading(false);\n        },\n        // 显示确认Loading\n        showLoading: () => {\n          setLoading(true);\n        },\n        // 隐藏确认Loading\n        hideLoading: () => {\n          setLoading(false);\n        },\n      };\n    },\n    [],\n  );\n\n  useEffect(() => {\n    if (visible) onLoad?.();\n  }, [visible]);\n\n  const handleOk = () => {\n    // 提交事件\n    onOk?.();\n  };\n\n  const handleCancel = () => {\n    onCancel?.();\n    // 取消事件\n    setVisible(false);\n  };\n  return (\n    <>\n      <Modal\n        {...config.props}\n        open={visible}\n        footer={config.props.footer ? undefined : null}\n        onOk={handleOk}\n        onCancel={handleCancel}\n        width={config.props.width || undefined}\n        confirmLoading={confirmLoading}\n        style={{ ...config.style }}\n      >\n        <Spin spinning={loading}>\n          <MarsRender elements={elements} />\n        </Spin>\n      </Modal>\n    </>\n  );\n});\nexport default memo(AntdModal);\n"],"names":["AntdModal","forwardRef","config","elements","onLoad","onOk","onCancel","ref","visible","setVisible","useState","confirmLoading","setConfirmLoading","loading","setLoading","useImperativeHandle","resolve","useEffect","handleOk","handleCancel","jsx","Fragment","Modal","Spin","MarsRender","memo"],"mappings":"wLAWA,MAAMA,EAAYC,EAAAA,WAAW,CAAC,CAAE,OAAAC,EAAQ,SAAAC,EAAU,OAAAC,EAAQ,KAAAC,EAAM,SAAAC,CAAS,EAAkBC,IAAa,CACtG,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAK,EACtC,CAACC,EAAgBC,CAAiB,EAAIF,EAAS,SAAAR,EAAO,MAAM,cAAc,EAC1E,CAACW,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAK,EAE5CK,EAAA,oBACER,EACA,KACS,CAEL,MAAO,IAAM,CACXE,EAAW,IAAM,EAAK,CACxB,EAEA,KAAM,IACG,IAAI,QAASO,GAAY,CAC9BP,EAAW,EAAI,EACf,WAAW,IAAMO,EAAQ,EAAI,EAAG,CAAC,CAAA,CAClC,EAGH,mBAAoB,IAAM,CACxBJ,EAAkB,EAAI,CACxB,EAEA,mBAAoB,IAAM,CACxBA,EAAkB,EAAK,CACzB,EAEA,YAAa,IAAM,CACjBE,EAAW,EAAI,CACjB,EAEA,YAAa,IAAM,CACjBA,EAAW,EAAK,CAAA,CAEpB,GAEF,CAAA,CACF,EAEAG,EAAAA,UAAU,IAAM,CACVT,IAAkBJ,GAAA,MAAAA,IAAA,EACrB,CAACI,CAAO,CAAC,EAEZ,MAAMU,EAAW,IAAM,CAEdb,GAAA,MAAAA,GACT,EAEMc,EAAe,IAAM,CACdb,GAAA,MAAAA,IAEXG,EAAW,EAAK,CAClB,EACA,OAEIW,MAAAC,EAAAA,SAAA,CAAA,SAAAD,EAAA,IAACE,EAAA,CACE,GAAGpB,EAAO,MACX,KAAMM,EACN,OAAQN,EAAO,MAAM,OAAS,OAAY,KAC1C,KAAMgB,EACN,SAAUC,EACV,MAAOjB,EAAO,MAAM,OAAS,OAC7B,eAAAS,EACA,MAAO,CAAE,GAAGT,EAAO,KAAM,EAEzB,eAACqB,EAAK,CAAA,SAAUV,EACd,SAACO,MAAAI,EAAA,CAAW,SAAArB,CAAoB,CAAA,CAClC,CAAA,CAAA,CAAA,EAEJ,CAEJ,CAAC,EACcsB,EAAAA,EAAAA,KAAKzB,CAAS"}