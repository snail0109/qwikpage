import{r as o,m as H,j as M}from"./index-Ba8_Z7I5.js";import{d as p,f as i,T as S,o as b}from"./Page-zRx-fbuc.js";import"./index-d9iZx7WN.js";import"./index-DzTVI9Lo.js";import"./index-C2BeiomC.js";const j=({config:s,onClick:a},d)=>{const[y,Y]=o.useState(""),[T,n]=o.useState(!0);o.useEffect(()=>{var c,l,u,x;const r=((l=(c=s.props)==null?void 0:c.text)==null?void 0:l.toString())||"",t=(u=s.props)==null?void 0:u.format,f=(x=s.props)==null?void 0:x.script;let e=r;if(t==="YYYY-MM-DD HH:mm:ss"?e=p(r).format(t):t==="YYYY-MM-DD"?e=p(r).format(t):t==="HH:mm:ss"?e=p(r).format(t):t==="money"?e=i(r,"currency"):t==="number"?e=i(r,"decimal"):t==="percent"&&(e=i(r,"percent")),f)try{e=new Function("value",`return (${f})(value);`)(e)}catch(m){console.error("脚本解析失败",m),H.error(JSON.stringify(m))}Y(e==null?void 0:e.toString())},[s.props.text]),o.useImperativeHandle(d,()=>({show(){n(!0)},hide(){n(!1)}}));const h=()=>{a==null||a()};return T&&M.jsx(S.Text,{style:s.style,...b(s.props,["script","text"]),onClick:h,children:y})},N=o.forwardRef(j);export{N as default};
