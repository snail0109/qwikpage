import{r as e,m as S,j as R,R as w}from"./index-C0qVWane.js";import{i as b}from"./index-BMEox4u4.js";import{S as j,o as D}from"./Page-D5iqHLgS.js";import"./index-DPKgr_Rt.js";import"./index-DfNzS1Q2.js";import"./MinusOutlined-DBQl31A9.js";import"./RedoOutlined-B23EvFCt.js";import"./index-i6Qw7kf9.js";const T=({config:r,onChange:s,onFinish:o},E)=>{var l,n;const[a,y]=e.useState(0),[N,i]=e.useState(!0);e.useEffect(()=>{var x,c,d,v;if(isNaN((x=r.props)==null?void 0:x.value)){console.error("倒计时组件值必须为时间戳类型"),S.error("倒计时组件值必须为时间戳");return}const p=((d=(c=r.props)==null?void 0:c.value)==null?void 0:d.toString())||"",f=(v=r.props)==null?void 0:v.script;let t=p;if(f)try{t=new Function("value",`return (${f})(value);`)(t)}catch(u){console.error("脚本解析失败",u),S.error(JSON.stringify(u))}y(Number(t==null?void 0:t.toString()))},[r.props.value,(l=r.props)==null?void 0:l.script]),e.useImperativeHandle(E,()=>({show(){i(!0)},hide(){i(!1)}}));const m=b;return N&&R.jsx(j.Countdown,{style:r.style,...D(r.props,["script","format","prefix","suffix"]),value:a,format:((n=r.props)==null?void 0:n.format)||void 0,prefix:r.props.prefix?w.createElement(m[r.props.prefix]):null,suffix:r.props.suffix?w.createElement(m[r.props.suffix]):null,onChange:p=>s==null?void 0:s(p),onFinish:()=>o==null?void 0:o(a)})},q=e.forwardRef(T);export{q as default};
