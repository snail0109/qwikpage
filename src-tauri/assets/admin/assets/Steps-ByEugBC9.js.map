{"version":3,"file":"Steps-ByEugBC9.js","sources":["../../../packages/materials/Functional/Steps/Steps.tsx"],"sourcesContent":["import { ComponentType } from '@materials/types';\nimport { Steps } from 'antd';\nimport { forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { handleApi } from '@materials/utils/handleApi';\nimport { usePageStore } from '@materials/stores/pageStore';\n\n/*泛型只需要定义组件本身用到的属性*/\nexport interface IConfig {\n  current: number;\n  direction: 'horizontal' | 'vertical';\n  labelPlacement: 'horizontal' | 'vertical';\n  responsive: boolean;\n}\n/**\n *\n * @param props 组件本身属性\n * @param style 组件样式\n * @returns\n */\nconst MSteps = ({ id, type, config, onChange }: ComponentType<IConfig>, ref: any) => {\n  const [visible, setVisible] = useState(true);\n  const [current, setCurrent] = useState(config.props.current || 0);\n  const [data, setData] = useState<Array<{ title: string; description: string; subTitle: string }>>([]);\n  const variableData = usePageStore((state) => state.page.pageData.variableData);\n  useEffect(() => {\n    setCurrent(config.props.current);\n  }, [config.props.current]);\n  useEffect(() => {\n    getDataList({});\n  }, [config.api, config.api?.sourceType == 'variable' ? variableData : '']);\n  // 列表加载\n  const getDataList = (data: any) => {\n    handleApi(config.api, data).then((res) => {\n      if (res?.code === 0) {\n        if (!Array.isArray(res.data)) {\n          console.error('[Steps]', 'data数据格式错误，请检查');\n          setData([]);\n        } else {\n          setData(res.data);\n        }\n      }\n    });\n  };\n  // 对外暴露方法\n  useImperativeHandle(ref, () => {\n    return {\n      show() {\n        setVisible(true);\n      },\n      hide() {\n        setVisible(false);\n      },\n      update() {\n        getDataList(data);\n      },\n      updateStep(val: number) {\n        setCurrent(val);\n      },\n    };\n  });\n  const handleChange = (current: number) => {\n    setCurrent(current);\n    onChange?.({ current });\n  };\n  return visible && <Steps style={config.style} {...config.props} current={current} items={data} onChange={handleChange}></Steps>;\n};\nexport default forwardRef(MSteps);\n"],"names":["MSteps","id","type","config","onChange","ref","visible","setVisible","useState","current","setCurrent","data","setData","variableData","usePageStore","state","useEffect","getDataList","_a","handleApi","res","useImperativeHandle","val","handleChange","jsx","Steps","forwardRef"],"mappings":"yLAmBA,MAAMA,EAAS,CAAC,CAAE,GAAAC,EAAI,KAAAC,EAAM,OAAAC,EAAQ,SAAAC,GAAoCC,IAAa,OACnF,KAAM,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,EAAI,EACrC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAASL,EAAO,MAAM,SAAW,CAAC,EAC1D,CAACQ,EAAMC,CAAO,EAAIJ,EAAAA,SAA0E,CAAA,CAAE,EAC9FK,EAAeC,EAAcC,GAAUA,EAAM,KAAK,SAAS,YAAY,EAC7EC,EAAAA,UAAU,IAAM,CACHN,EAAAP,EAAO,MAAM,OAAO,CAC9B,EAAA,CAACA,EAAO,MAAM,OAAO,CAAC,EACzBa,EAAAA,UAAU,IAAM,CACdC,EAAY,CAAA,CAAE,CAAA,EACb,CAACd,EAAO,MAAKe,EAAAf,EAAO,MAAP,YAAAe,EAAY,aAAc,WAAaL,EAAe,EAAE,CAAC,EAEnE,MAAAI,EAAeN,GAAc,CACjCQ,EAAUhB,EAAO,IAAKQ,CAAI,EAAE,KAAMS,GAAQ,EACpCA,GAAA,YAAAA,EAAK,QAAS,IACX,MAAM,QAAQA,EAAI,IAAI,EAIzBR,EAAQQ,EAAI,IAAI,GAHR,QAAA,MAAM,UAAW,gBAAgB,EACzCR,EAAQ,CAAA,CAAE,GAId,CACD,CACH,EAEAS,EAAA,oBAAoBhB,EAAK,KAChB,CACL,MAAO,CACLE,EAAW,EAAI,CACjB,EACA,MAAO,CACLA,EAAW,EAAK,CAClB,EACA,QAAS,CACPU,EAAYN,CAAI,CAClB,EACA,WAAWW,EAAa,CACtBZ,EAAWY,CAAG,CAAA,CAElB,EACD,EACK,MAAAC,EAAgBd,GAAoB,CACxCC,EAAWD,CAAO,EACPL,GAAA,MAAAA,EAAA,CAAE,QAAAK,GACf,EACA,OAAOH,GAAWkB,EAAAA,IAACC,EAAM,CAAA,MAAOtB,EAAO,MAAQ,GAAGA,EAAO,MAAO,QAAAM,EAAkB,MAAOE,EAAM,SAAUY,EAAc,CACzH,EACeG,EAAAA,EAAAA,WAAW1B,CAAM"}