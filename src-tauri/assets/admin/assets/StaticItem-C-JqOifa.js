import{r as m,j as s,m as y}from"./index-Ba8_Z7I5.js";import{F as c,U as d,d as i,f as h,I as x}from"./Page-zRx-fbuc.js";import{useFormContext as j}from"./context-CZSQjkXQ.js";import"./index-d9iZx7WN.js";import"./index-DzTVI9Lo.js";import"./index-C2BeiomC.js";const I=({type:e,config:t},r)=>{const{initValues:a}=j(),[o,n]=m.useState(!0);return m.useEffect(()=>{var l;const u=(l=t.props.formItem)==null?void 0:l.name,f=t.props.defaultValue;a(e,u,f)},[t.props.defaultValue]),m.useImperativeHandle(r,()=>({show(){n(!0)},hide(){n(!1)}})),o&&s.jsx(c.Item,{...t.props.formItem,children:s.jsx(T,{...t.props.formWrap,name:t.props.formItem.name,style:t.style})})},T=e=>{const t=e.value||"";let r=t;if(d(t))return s.jsx("span",{style:e.style,children:e.emptyType});if(e.showType==="text"&&(e.dateType&&(r=i(t).format(e.dateType)),e.numberType&&(r=h(t,e.numberType)),t!=null&&t.format&&(r=i(t).format())),e.script)try{r=new Function("value",`return (${e.script})(value);`)(r)}catch(a){console.error("脚本解析失败",a),y.error(JSON.stringify(a))}if(r=r==null?void 0:r.toString(),e.showType==="text")return s.jsx("span",{style:e.style,children:r});if(e.showType==="href")return s.jsx("a",{href:r,target:"_blank",style:e.style,children:r});if(e.showType==="image")return s.jsx(x,{src:r,style:e.style})},E=m.forwardRef(I);export{E as default};
